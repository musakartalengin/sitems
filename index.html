<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sürpriz!</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: #0a0a2a url('background.jpeg') center/cover no-repeat; /* Yıldızlı arka plan */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            perspective: 1000px; /* 3D animasyonlar için */
        }

        .scene {
            width: 300px;
            height: 400px;
            position: relative;
        }

        .magic-chest {
            width: 150px;
            height: 100px;
            background: #FFB6C1; /* Açık Pembe sandık */
            border: 5px solid #FF69B4; /* Koyu Pembe çerçeve */
            border-radius: 10px;
            position: absolute;
            bottom: -200px; /* Başlangıçta ekranın altında */
            left: 50%;
            transform-style: preserve-3d;
            transform: translateX(-50%) scale(0.1) rotateY(30deg); /* Başlangıçta küçük ve uzakta */
            opacity: 0;
            animation: approachChest 3s ease-out 0.5s forwards;
            cursor: pointer; /* Açmak için tıklanabilir hissi */
            z-index: 10;
            position: relative; /* İçerik konumlandırması için */
        }

        .inner-chest {
            width: 80px; /* Daha küçük */
            height: 50px;
            background: #FFD700; /* Altın rengi */
            border: 3px solid #B8860B; /* Koyu altın çerçeve */
            border-radius: 5px;
            position: absolute;
            bottom: 10px; /* Ana sandığın içinde */
            left: 50%;
            transform: translateX(-50%) scale(0); /* Başlangıçta gizli */
            opacity: 0;
            transition: transform 0.5s ease-out 0.3s, opacity 0.5s ease-out 0.3s; /* Gecikmeli çıkış */
            cursor: pointer;
            z-index: 11;
        }

        .inner-chest-lid {
             width: 100%;
             height: 15px;
             background: #F0E68C; /* Açık altın */
             border: 3px solid #B8860B;
             border-bottom: none;
             border-radius: 5px 5px 0 0;
             position: absolute;
             top: -15px;
             left: -3px;
             transform-origin: bottom center;
             transition: transform 0.4s ease-in-out;
        }

        .magic-chest.open .inner-chest {
            transform: translateX(-50%) scale(1) translateY(-20px); /* Yukarı çıkar */
            opacity: 1;
        }

        .inner-chest.open .inner-chest-lid {
             transform: rotateX(-120deg);
        }


        .chest-lid {
            width: 100%;
            height: 30px;
            background: #FFC0CB; /* Daha açık pembe kapak */
            border: 5px solid #FF69B4;
            border-bottom: none;
            border-radius: 10px 10px 0 0;
            position: absolute;
            top: -30px;
            left: -5px; /* Kenarlıkları hizalamak için */
            transform-origin: bottom center;
            transition: transform 0.5s ease-in-out;
        }

        .magic-chest.open .chest-lid {
            transform: rotateX(-120deg); /* Kapak açılma animasyonu */
        }

        /* Peri kızı artık kullanılmıyor, kaldırılabilir veya gizlenebilir */
        .fairy-girl {
           display: none; /* Peri kızını gizle */
        }

        .message {
            position: fixed;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Arial', sans-serif; /* Daha okunaklı font */
            font-size: 4vw; /* Font değiştiği için boyutu biraz ayarlayalım */
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8); /* Daha net gölge */
            opacity: 0;
            transition: opacity 1s ease-out 0.5s; /* Yumuşak geçiş için */
            z-index: 20;
            white-space: nowrap;
            text-align: center;
        }

        .chest-prompt {
            position: absolute;
            bottom: 15px; /* Sandığın biraz altına */
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            text-shadow: 1px 1px 2px black;
            opacity: 0; /* Başlangıçta gizli */
            transition: opacity 0.5s ease-in-out;
            z-index: 15;
            pointer-events: none; /* Yazının tıklamayı engellememesi için */
        }

        .magic-chest:not(.open) + .chest-prompt.visible {
             opacity: 1; /* Sandık yaklaşınca görünür yap */
        }

        .crack-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('cracked-screen.png') center/cover no-repeat;
            opacity: 0;
            transition: opacity 0.3s ease-in;
            z-index: 50; /* En üstte */
            pointer-events: none; /* Tıklamayı engellemesin */
        }

        .crack-overlay.visible {
            opacity: 1;
        }


        /* Animasyonlar */
        /* Peri kızı animasyonları artık gereksiz */
        /*
        @keyframes revealFairy { ... }
        @keyframes flyAround { ... }
        */
        @keyframes approachChest {
            0% {
                bottom: -200px;
                transform: translateX(-50%) scale(0.1) rotateY(30deg);
                opacity: 0;
            }
            70% {
                 bottom: 50px;
                 transform: translateX(-50%) scale(1) rotateY(-10deg);
                 opacity: 1;
            }
            100% {
                bottom: 50px;
                transform: translateX(-50%) scale(1) rotateY(0deg);
                opacity: 1;
            }
        }

        @keyframes revealFairy {
            0% {
                transform: translateX(-50%) translateY(20px) scale(0);
                opacity: 0;
            }
            100% {
                transform: translateX(-50%) translateY(-120px) scale(1); /* Sandıktan yukarı çıkar */
                opacity: 1;
            }
        }

        @keyframes flyAround {
            0% { transform: translateX(-50%) translateY(-120px) scale(1) rotateZ(0deg); }
            25% { transform: translateX(-150%) translateY(-200px) scale(1.1) rotateZ(-15deg); }
            50% { transform: translateX(50%) translateY(-250px) scale(1) rotateZ(15deg); }
            75% { transform: translateX(-50%) translateY(-180px) scale(1.1) rotateZ(-10deg); }
            100% { transform: translateX(-50%) translateY(-120px) scale(1) rotateZ(0deg); }
        }


        @keyframes fadeInMessage {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

    </style>
</head>
<body>
    <div class="scene">
        <div class="magic-chest" id="chest">
            <div class="chest-lid"></div>
             <div class="inner-chest" id="innerChest">
                 <div class="inner-chest-lid"></div>
             </div>
            <!-- <img src="peri-kizi.png" alt="Peri Kızı" class="fairy-girl" id="fairy"> --> <!-- Peri kızı kaldırıldı -->
        </div>
        <div class="chest-prompt" id="chestPrompt">Sihirli Sandığı Aç</div>
    </div>
     <div class="crack-overlay" id="crackOverlay"></div>
    <div class="message" id="message">Güzelliğinizle ekranı çatlattınız prenses!</div> <!-- Yeni mesaj -->

    <script>
        const chest = document.getElementById('chest');
        const innerChest = document.getElementById('innerChest');
        const message = document.getElementById('message');
        const chestPrompt = document.getElementById('chestPrompt');
        const crackOverlay = document.getElementById('crackOverlay');

        // Sandık animasyonu bittikten sonra tıklama olayını ekle
        chest.addEventListener('animationend', (event) => {
            // Sadece 'approachChest' animasyonu bittiğinde tıklama aktif olsun ve yazıyı göster
            if (event.animationName === 'approachChest') {
                chest.addEventListener('click', openChest);
                chestPrompt.classList.add('visible'); // Yazıyı görünür yap
            }
        });

        function openChest() {
            chest.classList.add('open'); // Ana sandığı aç
            chestPrompt.classList.remove('visible'); // "Aç" yazısını gizle
            chest.removeEventListener('click', openChest); // Ana sandık tıklamasını kaldır
            chest.style.cursor = 'default';

            // İç sandık görünür olduktan sonra tıklama ekle
            innerChest.addEventListener('transitionend', () => {
                 innerChest.addEventListener('click', openInnerChest);
            }, { once: true }); // Sadece bir kere çalışsın
        }

        function openInnerChest() {
            innerChest.classList.add('open'); // İç sandığı aç (görsel efekt için)
            innerChest.removeEventListener('click', openInnerChest); // İç sandık tıklamasını kaldır
            innerChest.style.cursor = 'default';

            // Kısa bir süre sonra çatlama efekti ve mesaj
            setTimeout(() => {
                crackOverlay.classList.add('visible'); // Çatlak efektini göster
                message.style.opacity = 1; // Yeni mesajı göster
                chest.style.opacity = 0; // Sandıkları gizle (opsiyonel)
                innerChest.style.opacity = 0;
                chest.style.transition = 'opacity 0.5s';
                innerChest.style.transition = 'opacity 0.5s';
            }, 400); // İç kapak açılma süresi kadar bekle
        }

        // Eski mesaj ve peri kızı ile ilgili event listener'lar kaldırıldı.


    </script>
</body>
</html>

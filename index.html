<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bir Soru</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: #1a1a2e; /* Koyu mavi tonu */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            font-family: 'Arial', sans-serif;
        }

        .scene {
            width: 90%;
            max-width: 800px; /* Maksimum geniÅŸlik */
            height: 80vh;
            position: relative;
            display: flex;
            justify-content: center; /* Ortala */
            gap: 25%; /* Karakterler arasÄ± boÅŸluÄŸu daha da artÄ±r */
            align-items: center; /* Dikeyde ortala (aÅŸaÄŸÄ±dan yukarÄ± taÅŸÄ±) */
            padding-bottom: 10vh; /* Biraz daha yukarÄ± itmek iÃ§in alt boÅŸluk */
        }

        /* --- Karakterler --- */
        .character {
            width: 40%; /* GeniÅŸliÄŸi ayarla */
            max-width: 250px;
            position: relative; /* Balonlar iÃ§in */
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .character img {
            width: 100%;
            height: auto;
            display: block;
        }
        .character.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- KonuÅŸma BalonlarÄ± --- */
        .speech-bubble {
            position: absolute;
            bottom: 105%; /* Karakterin biraz Ã¼stÃ¼ */
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            color: #333;
            padding: 15px 20px;
            border-radius: 20px;
            border: 3px solid #ccc;
            min-width: 150px;
            max-width: 250px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 20;
            white-space: normal; /* Uzun metinler iÃ§in */
        }
        .speech-bubble::after { /* Balonun Ã¼Ã§gen ucu */
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 15px 15px 0;
            border-style: solid;
            border-color: white transparent transparent transparent;
        }
        .speech-bubble.visible {
            opacity: 1;
        }

        /* --- Evet/HayÄ±r DÃ¼ÄŸmeleri --- */
        .options {
            position: absolute;
            bottom: -60px; /* KÄ±z karakterin altÄ±na */
            left: 50%;
            transform: translateX(-50%); /* Ortala */
            display: flex;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out 0.5s; /* Gecikmeli gÃ¶rÃ¼nÃ¼m */
            z-index: 25;
        }
        .options.visible {
            opacity: 1;
        }
        .options button {
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #evet-buton { background-color: #4CAF50; color: white; }
        #evet-buton:hover { background-color: #45a049; }
        #hayir-buton { background-color: #f44336; color: white; }
        #hayir-buton:hover { background-color: #da190b; }

        /* --- Kalp Ä°konu ve Animasyonu --- */
        #kalp-ikon {
            position: absolute; /* Scene'e gÃ¶re konumlanacak */
            font-size: 50px; /* Kalp boyutu */
            color: red;
            opacity: 0;
            z-index: 100; /* DiÄŸer her ÅŸeyin Ã¼zerinde olmalÄ± */
            /* BaÅŸlangÄ±Ã§ konumu JS ile ayarlanacak */
        }
        @keyframes kalp-ucusu {
            0% { opacity: 1; transform: translate(0, 0) scale(1); }
            50% { opacity: 1; transform: translate(var(--tx), var(--ty)) scale(1.5); } /* Ortada bÃ¼yÃ¼sÃ¼n */
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0.5); } /* Hedefte kÃ¼Ã§Ã¼lerek kaybolsun */
        }
        #kalp-ikon.flying {
            animation: kalp-ucusu 1.5s ease-in-out forwards;
        }

        /* --- KÄ±rÄ±k Kalp --- */
        #kirik-kalp {
            position: absolute;
            font-size: 50px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 30;
             /* Konumu JS ile ayarlanacak */
        }
         #kirik-kalp.visible {
             opacity: 1;
         }

        /* --- GÃ¶zyaÅŸÄ± --- */
        .teardrop {
            position: absolute;
            width: 10px;
            height: 15px;
            background-color: #a0d2eb; /* AÃ§Ä±k mavi */
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; /* Damla ÅŸekli */
            opacity: 0;
            z-index: 110; /* Kalbin de Ã¼zerinde olabilir */
            pointer-events: none; /* TÄ±klanamaz */
        }
        @keyframes teardrop-fall {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(50px); } /* AÅŸaÄŸÄ± dÃ¼ÅŸÃ¼p kaybolsun */
        }
        .teardrop.falling {
            animation: teardrop-fall 1s ease-in forwards;
        }


        /* --- BaÅŸlangÄ±Ã§ SandÄ±ÄŸÄ± (Opsiyonel) --- */
        /* EÄŸer baÅŸlangÄ±Ã§ta sandÄ±k isteniyorsa buraya eklenebilir */
        /* .initial-chest { ... } */

    </style>
</head>
<body>
    <div class="scene">
        <!-- BaÅŸlangÄ±Ã§ta sandÄ±k istenirse buraya eklenebilir -->
        <!-- <div class="initial-chest" id="startChest"></div> -->

        <div class="character" id="erkek-karakter">
            <img src="erkek-karakter.png" alt="Erkek Karakter">
            <div class="speech-bubble" id="erkek-balon">Merhaba prenses gÃ¶nlÃ¼nÃ¼ alabilir miyim?</div>
            <div class="speech-bubble" id="uzgun-balon" style="background-color: #f0f0f0;">Ah, Ã§ok Ã¼zÃ¼ldÃ¼m...</div>
             <div id="kirik-kalp">ğŸ’”</div>
        </div>

        <div class="character" id="kiz-karakter">
            <img src="peri-kizi.png" alt="KÄ±z Karakter">
            <div class="options" id="cevap-secenekleri">
                <button id="evet-buton">Evet</button>
                <button id="hayir-buton">HayÄ±r</button>
            </div>
             <!-- Kalp ikonu kÄ±zÄ±n dÄ±ÅŸÄ±na, scene iÃ§ine taÅŸÄ±ndÄ± -->
        </div>
         <div id="kalp-ikon">â¤ï¸</div> <!-- Buraya taÅŸÄ±ndÄ± -->
    </div>

    <script>
        const erkekKarakter = document.getElementById('erkek-karakter');
        const kizKarakter = document.getElementById('kiz-karakter');
        const erkekBalon = document.getElementById('erkek-balon');
        const uzgunBalon = document.getElementById('uzgun-balon');
        const cevapSecenekleri = document.getElementById('cevap-secenekleri');
        const evetButon = document.getElementById('evet-buton');
        const hayirButon = document.getElementById('hayir-buton');
        const kalpIkon = document.getElementById('kalp-ikon');
        const kirikKalp = document.getElementById('kirik-kalp');

        // BaÅŸlangÄ±Ã§ animasyonu (ÅŸimdilik doÄŸrudan karakterleri gÃ¶sterelim)
        // EÄŸer baÅŸlangÄ±Ã§ta sandÄ±k olacaksa, bu kÄ±sÄ±m sandÄ±k tÄ±klamasÄ±na baÄŸlanmalÄ±
        function startScene() {
            erkekKarakter.classList.add('visible');
            kizKarakter.classList.add('visible');

            // Erkek karakter gÃ¶rÃ¼ndÃ¼kten sonra balonu ve seÃ§enekleri gÃ¶ster
            erkekKarakter.addEventListener('transitionend', () => {
                erkekBalon.classList.add('visible');
                cevapSecenekleri.classList.add('visible');
            }, { once: true });
        }

        // Evet butonuna tÄ±klanÄ±nca
        evetButon.addEventListener('click', () => {
            erkekBalon.classList.remove('visible');
            cevapSecenekleri.classList.remove('visible');

            const kizImg = kizKarakter.querySelector('img');
            const erkekImg = erkekKarakter.querySelector('img');
            const sceneRect = document.querySelector('.scene').getBoundingClientRect();
            const kizImgRect = kizImg.getBoundingClientRect();
            const erkekImgRect = erkekImg.getBoundingClientRect();

             // BaÅŸlangÄ±Ã§ konumu: KÄ±z resminin ortasÄ± (scene'e gÃ¶re)
            const startX_abs = kizImgRect.left + kizImgRect.width / 2;
            const startY_abs = kizImgRect.top + kizImgRect.height / 2;
            const startX_rel = startX_abs - sceneRect.left;
            const startY_rel = startY_abs - sceneRect.top;

            // Hedef konumu: Erkek resminin ortasÄ± (scene'e gÃ¶re)
            const endX_abs = erkekImgRect.left + erkekImgRect.width / 2;
            const endY_abs = erkekImgRect.top + erkekImgRect.height / 2;
            const endX_rel = endX_abs - sceneRect.left;
            const endY_rel = endY_abs - sceneRect.top;

            // Kalp ikonunu baÅŸlangÄ±Ã§ noktasÄ±na gÃ¶re ayarla
            kalpIkon.style.position = 'absolute'; // Scene'e gÃ¶re konumlandÄ±r (CSS'de zaten var ama emin olalÄ±m)
            kalpIkon.style.opacity = 1; // GÃ¶rÃ¼nÃ¼r yap

            // BoyutlarÄ± alabilmek iÃ§in kÄ±sa bir bekleme gerekebilir, ama Ã¶nce pozisyonu ayarlayalÄ±m
            // Kalp boyutunu Ã¶nceden biliyorsak (font-size'dan) daha iyi olurdu, ama offsetWidth/Height kullanacaÄŸÄ±z
            const kalpWidth = kalpIkon.offsetWidth || 50; // Fallback
            const kalpHeight = kalpIkon.offsetHeight || 50; // Fallback

            // BaÅŸlangÄ±Ã§ pozisyonunu ayarla (ikonun merkezini kÄ±z resminin ortasÄ±na hizala)
            kalpIkon.style.left = `${startX_rel - kalpWidth / 2}px`;
            kalpIkon.style.top = `${startY_rel - kalpHeight / 2}px`;

            // Hareket mesafesini hesapla (hedef - baÅŸlangÄ±Ã§, scene'e gÃ¶re)
            const targetX = endX_rel - startX_rel; // X eksenindeki fark
            const targetY = endY_rel - startY_rel; // Y eksenindeki fark

            // CSS deÄŸiÅŸkenlerini ayarla (animasyon iÃ§in)
            kalpIkon.style.setProperty('--tx', `${targetX}px`);
            kalpIkon.style.setProperty('--ty', `${targetY}px`);

            // Animasyonu baÅŸlat (bir sonraki frame'de)
            requestAnimationFrame(() => {
                kalpIkon.classList.add('flying');
            });


            // Animasyon bitince kalbi tamamen gizle (opsiyonel)
            // kalpIkon.addEventListener('animationend', () => {
            //     kalpIkon.style.opacity = 0;
            // }, { once: true });
        });

        // HayÄ±r butonuna tÄ±klanÄ±nca
        hayirButon.addEventListener('click', () => {
            erkekBalon.classList.remove('visible');
            cevapSecenekleri.classList.remove('visible');
            // uzgunBalon.classList.add('visible'); // ÃœzgÃ¼n balonu gÃ¶sterme

            const erkekImg = erkekKarakter.querySelector('img');
            const sceneRect = document.querySelector('.scene').getBoundingClientRect();
            const erkekImgRect = erkekImg.getBoundingClientRect();

            // KÄ±rÄ±k kalp pozisyonunu ayarla (Erkek resminin Ã¼st-ortasÄ±, scene'e gÃ¶re)
            const kirikKalpX_abs = erkekImgRect.left + erkekImgRect.width / 2;
            const kirikKalpY_abs = erkekImgRect.top;
            const kirikKalpX_rel = kirikKalpX_abs - sceneRect.left;
            const kirikKalpY_rel = kirikKalpY_abs - sceneRect.top;

            kirikKalp.style.position = 'absolute'; // Scene'e gÃ¶re
            requestAnimationFrame(() => {
                const kirikKalpWidth = kirikKalp.offsetWidth || 30; // Fallback
                const kirikKalpHeight = kirikKalp.offsetHeight || 30; // Fallback
                kirikKalp.style.left = `${kirikKalpX_rel - kirikKalpWidth / 2}px`; // Yatayda ortala
                kirikKalp.style.top = `${kirikKalpY_rel - kirikKalpHeight}px`; // Resmin tam Ã¼stÃ¼nde
                kirikKalp.classList.add('visible');
            });


            // GÃ¶zyaÅŸÄ± oluÅŸtur ve animasyonu baÅŸlat
            const tear = document.createElement('div');
            tear.classList.add('teardrop');
            document.querySelector('.scene').appendChild(tear); // Scene'e ekle

            // GÃ¶zyaÅŸÄ± baÅŸlangÄ±Ã§ pozisyonu (Erkek resminin gÃ¶z hizasÄ± - yaklaÅŸÄ±k, scene'e gÃ¶re)
            const tearStartX_abs = erkekImgRect.left + erkekImgRect.width / 2; // Ortadan baÅŸlasÄ±n
            const tearStartY_abs = erkekImgRect.top + erkekImgRect.height * 0.30; // GÃ¶z hizasÄ± (yaklaÅŸÄ±k %30 aÅŸaÄŸÄ±da)
            const tearStartX_rel = tearStartX_abs - sceneRect.left;
            const tearStartY_rel = tearStartY_abs - sceneRect.top;


            requestAnimationFrame(() => {
                 const tearWidth = tear.offsetWidth || 10;
                 tear.style.left = `${tearStartX_rel - tearWidth / 2}px`;
                 tear.style.top = `${tearStartY_rel}px`;
                 tear.style.opacity = 1; // GÃ¶rÃ¼nÃ¼r yap
                 requestAnimationFrame(() => { // Animasyonu bir sonraki frame'de baÅŸlat
                    tear.classList.add('falling');
                 });
            });

            // Animasyon bitince gÃ¶zyaÅŸÄ±nÄ± kaldÄ±r
            tear.addEventListener('animationend', () => {
                tear.remove();
            }, { once: true });
        });

        // Sayfa yÃ¼klendiÄŸinde sahneyi baÅŸlat
        window.onload = startScene;

    </script>
</body>
</html>

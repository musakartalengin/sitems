<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sürpriz!</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: #0a0a2a url('background.jpeg') center/cover no-repeat; /* Yıldızlı arka plan */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            perspective: 1000px; /* 3D animasyonlar için */
        }

        .scene {
            width: 300px;
            height: 400px;
            position: relative;
        }

        .magic-chest {
            width: 150px;
            height: 100px;
            background: #FFB6C1; /* Açık Pembe sandık */
            border: 5px solid #FF69B4; /* Koyu Pembe çerçeve */
            border-radius: 10px;
            position: absolute;
            bottom: -200px; /* Başlangıçta ekranın altında */
            left: 50%;
            /* transform-style: preserve-3d; Kaldırıldı */
            transform: translateX(-50%) scale(0.1) rotateY(30deg); /* Başlangıçta küçük ve uzakta */
            opacity: 0;
            animation: approachChest 3s ease-out 0.5s forwards;
            cursor: pointer; /* Açmak için tıklanabilir hissi */
            z-index: 10;
            position: relative; /* İçerik konumlandırması için */
        }

        .gold-chest { /* .inner-chest yerine .gold-chest */
            width: 100px; /* Biraz daha büyük yapalım */
            height: 70px;
            background: linear-gradient(to bottom, #FFFACD, #FFD700); /* Altın gradyan */
            border: 4px solid #B8860B; /* Koyu altın çerçeve */
            border-radius: 8px;
            position: absolute;
            bottom: 20px; /* Pembe sandığın son konumuyla aynı */
            left: 50%;
            transform: translateX(-50%); /* scale(0) kaldırıldı, sadece merkezleme */
            opacity: 0; /* Başlangıçta gizli */
            transition: transform 0.5s ease-out, opacity 0.5s ease-out; /* Transition */
            cursor: pointer;
            z-index: 11; /* Pembe sandığın üzerinde */
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .gold-chest.visible { /* .visible sınıfını geri ekle */
             opacity: 1;
             transform: translateX(-50%) scale(1);
        }

        .gold-chest-lid { /* .inner-chest-lid yerine */
             width: 100%;
             height: 20px; /* Biraz daha kalın */
             background: linear-gradient(to bottom, #FFFACD, #F0E68C); /* Açık altın gradyan */
             border: 4px solid #B8860B;
             border-bottom: none;
             border-radius: 8px 8px 0 0;
             position: absolute;
             top: -20px;
             left: -4px; /* Kenarlıkları hizala */
             transform-origin: bottom center;
             transition: transform 0.4s ease-in-out;
        }

        /* .magic-chest.open .inner-chest kuralı artık geçerli değil */

        .gold-chest.open .gold-chest-lid { /* .inner-chest.open yerine */
             transform: rotateX(-120deg);
        }


        .chest-lid { /* Pembe sandık kapağı */
            width: 100%;
            height: 30px;
            background: linear-gradient(to bottom, #FFFAFA, #FFC0CB); /* Pembe gradyan */
            border: 5px solid #FF69B4; /* Koyu Pembe çerçeve */
            border-bottom: none;
            border-radius: 10px 10px 0 0;
            position: absolute;
            top: -30px;
            left: -5px; /* Kenarlıkları hizalamak için */
            transform-origin: bottom center;
            transition: transform 0.5s ease-in-out;
        }

        .magic-chest.open .chest-lid {
            transform: rotateX(-120deg); /* Kapak açılma animasyonu */
        }

        /* Peri kızı artık kullanılmıyor, kaldırılabilir veya gizlenebilir */
        .fairy-girl {
           display: none; /* Peri kızını gizle */
        }

        .message {
            position: fixed;
            top: 50%; /* Ortaya alalım */
            left: 50%;
            transform: translate(-50%, -50%); /* Tam ortalama */
            font-family: 'Arial', sans-serif;
            font-weight: bold; /* Kalın yazı */
            font-size: 5vw; /* Biraz daha büyük */
            color: #FFFFE0; /* Açık sarı yazı */
            background-color: rgba(220, 20, 60, 0.8); /* Yarı şeffaf kırmızı arka plan */
            padding: 15px 30px; /* İç boşluk */
            border-radius: 10px; /* Köşe yuvarlama */
            border: 2px solid #FFFFE0; /* Açık sarı çerçeve */
            text-shadow: 1px 1px 2px black; /* Yazı gölgesi */
            opacity: 0;
            transition: opacity 0.5s ease-out; /* Daha hızlı belirmesi için */
            z-index: 60; /* Her şeyin üzerinde */
            white-space: nowrap;
            text-align: center;
        }

        .chest-prompt { /* Yazı stilleri */
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            text-shadow: 1px 1px 2px black;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 15;
            pointer-events: none;
        }

        #pinkChestPrompt {
             bottom: 0px; /* Pembe sandığın hemen altı */
        }

        #goldChestPrompt {
             bottom: 0px; /* Altın sandığın hemen altı */
        }

        .chest-prompt.visible {
             opacity: 1;
        }


        .magic-chest.hidden, .gold-chest.hidden {
            opacity: 0 !important; /* Kaybolma efekti için !important gerekebilir */
            pointer-events: none; /* Kaybolunca tıklanmasın */
            transition: opacity 0.5s ease-out;
        }

        .crack-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('cracked-screen.png') center/cover no-repeat;
            opacity: 0;
            transition: opacity 0.3s ease-in;
            z-index: 50; /* En üstte */
            pointer-events: none; /* Tıklamayı engellemesin */
        }

        .crack-overlay.visible {
            opacity: 1;
        }

        @keyframes shake { /* Tıklama animasyonu */
            0%, 100% { transform: translateX(-50%) rotate(0deg); }
            25% { transform: translateX(-50%) rotate(-2deg); }
            75% { transform: translateX(-50%) rotate(2deg); }
        }

        .shaking {
            animation: shake 0.3s ease-in-out;
        }


        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .message.blinking {
            animation: blink 1s infinite;
        }


        /* Animasyonlar */
        @keyframes approachChest { /* Pembe sandığın aşağıdan gelmesi */
            0% {
                bottom: -200px;
                transform: translateX(-50%) scale(0.1) rotateY(30deg);
                opacity: 0;
            }
            70% {
                 bottom: 20px; /* Daha aşağıda dursun */
                 transform: translateX(-50%) scale(1) rotateY(-10deg);
                 opacity: 1;
            }
            100% {
                bottom: 20px; /* Daha aşağıda dursun */
                transform: translateX(-50%) scale(1) rotateY(0deg);
                opacity: 1;
            }
        }

        @keyframes revealFairy {
            0% {
                transform: translateX(-50%) translateY(20px) scale(0);
                opacity: 0;
            }
            100% {
                transform: translateX(-50%) translateY(-120px) scale(1); /* Sandıktan yukarı çıkar */
                opacity: 1;
            }
        }

        @keyframes flyAround {
            0% { transform: translateX(-50%) translateY(-120px) scale(1) rotateZ(0deg); }
            25% { transform: translateX(-150%) translateY(-200px) scale(1.1) rotateZ(-15deg); }
            50% { transform: translateX(50%) translateY(-250px) scale(1) rotateZ(15deg); }
            75% { transform: translateX(-50%) translateY(-180px) scale(1.1) rotateZ(-10deg); }
            100% { transform: translateX(-50%) translateY(-120px) scale(1) rotateZ(0deg); }
        }


        @keyframes fadeInMessage {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

    </style>
</head>
<body>
    <div class="scene">
        <div class="magic-chest" id="chest">
            <div class="chest-lid"></div>
            <!-- İçteki sandık div'i buradan kaldırıldı -->
            <!-- <img src="peri-kizi.png" alt="Peri Kızı" class="fairy-girl" id="fairy"> -->
        </div>
        <div class="chest-prompt" id="pinkChestPrompt">Sihirli Sandığı Aç</div> <!-- Pembe sandık yazısı -->
         <div class="gold-chest" id="goldChest"> <!-- innerChest yerine goldChest -->
             <div class="gold-chest-lid"></div>
         </div>
        <div class="chest-prompt" id="goldChestPrompt">Sihirli Sandığı Aç</div> <!-- Altın sandık yazısı -->
    </div>
     <div class="crack-overlay" id="crackOverlay"></div>
    <div class="message" id="message">Güzelliğinizden dolayı ekranı çatlattınız!</div> <!-- Yeni mesaj -->

    <script>
        const pinkChest = document.getElementById('chest');
        const goldChest = document.getElementById('goldChest');
        const pinkChestPrompt = document.getElementById('pinkChestPrompt');
        const goldChestPrompt = document.getElementById('goldChestPrompt');
        const message = document.getElementById('message');
        const crackOverlay = document.getElementById('crackOverlay');

        // Pembe sandık animasyonu bittikten sonra
        pinkChest.addEventListener('animationend', (event) => {
            if (event.animationName === 'approachChest') {
                pinkChestPrompt.classList.add('visible'); // Yazıyı göster
                pinkChest.addEventListener('click', handlePinkChestClick);
            }
        });

        function handlePinkChestClick() {
            pinkChest.removeEventListener('click', handlePinkChestClick);
            pinkChestPrompt.classList.remove('visible'); // Yazıyı gizle
            pinkChest.classList.add('shaking'); // Sallanma animasyonu

            pinkChest.addEventListener('animationend', (event) => {
                if (event.animationName === 'shake') {
                    showGoldChest();
                }
            }, { once: true });
        }

        function showGoldChest() {
            pinkChest.classList.add('hidden'); // Pembe sandığı gizle
            goldChest.classList.add('visible'); // Altın sandığı göster

            // Altın sandık göründükten sonra
            goldChest.addEventListener('transitionend', (event) => {
                if (event.propertyName === 'opacity' || event.propertyName === 'transform') {
                    goldChestPrompt.classList.add('visible'); // Yazıyı göster
                    goldChest.addEventListener('click', handleGoldChestClick, { once: true });
                }
            }, { once: true });
        }

         function handleGoldChestClick() {
             goldChest.removeEventListener('click', handleGoldChestClick);
             goldChestPrompt.classList.remove('visible'); // Yazıyı gizle
             goldChest.classList.add('shaking'); // Sallanma animasyonu

             goldChest.addEventListener('animationend', (event) => {
                 if (event.animationName === 'shake') {
                     crackScreen();
                 }
             }, { once: true });
         }

        function crackScreen() {
             // goldChest.classList.add('open'); // Kapak açma isteğe bağlı
             goldChest.classList.add('hidden'); // Altın sandığı gizle
             crackOverlay.classList.add('visible'); // Çatlak efektini göster

             // Çatlak göründükten 2 saniye sonra mesajı göster
             setTimeout(() => {
                 message.style.opacity = 1;
                 message.classList.add('blinking');
             }, 2000);
        }


    </script>
</body>
</html>
